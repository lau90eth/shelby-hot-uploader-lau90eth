"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __accessCheck = (obj, member, msg) => {
  if (!member.has(obj))
    throw TypeError("Cannot " + msg);
};
var __privateGet = (obj, member, getter) => {
  __accessCheck(obj, member, "read from private field");
  return getter ? getter.call(obj) : member.get(obj);
};
var __privateAdd = (obj, member, value) => {
  if (member.has(obj))
    throw TypeError("Cannot add the same private member more than once");
  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
};
var __privateSet = (obj, member, value, setter) => {
  __accessCheck(obj, member, "write to private field");
  setter ? setter.call(obj, value) : member.set(obj, value);
  return value;
};

// src/index.ts
var src_exports = {};
__export(src_exports, {
  AptosConnectAccount: () => AptosConnectAccount,
  AptosConnectAppleWallet: () => AptosConnectAppleWallet,
  AptosConnectGenericWallet: () => AptosConnectGenericWallet,
  AptosConnectGoogleWallet: () => AptosConnectGoogleWallet,
  AptosConnectWallet: () => AptosConnectWallet,
  registerAptosConnect: () => registerAptosConnect
});
module.exports = __toCommonJS(src_exports);
var import_wallet_standard7 = require("@aptos-labs/wallet-standard");

// src/AptosConnectAppleWallet.ts
var import_wallet_standard4 = require("@aptos-labs/wallet-standard");

// src/AptosConnectWallet.ts
var import_wallet_api = require("@aptos-connect/wallet-api");
var import_ts_sdk3 = require("@aptos-labs/ts-sdk");
var import_wallet_standard3 = require("@aptos-labs/wallet-standard");
var import_crypto = require("@identity-connect/crypto");
var import_dapp_sdk = require("@identity-connect/dapp-sdk");

// src/AptosConnectAccount.ts
var import_ts_sdk = require("@aptos-labs/ts-sdk");
var import_wallet_standard = require("@aptos-labs/wallet-standard");
var _address, _publicKey;
var AptosConnectAccount = class {
  constructor({ address, ansName, publicKey }) {
    // region AptosWalletAccount
    this.chains = import_wallet_standard.APTOS_CHAINS;
    this.features = [];
    // endregion
    // region PetraAccount
    __privateAdd(this, _address, void 0);
    __privateAdd(this, _publicKey, void 0);
    __privateSet(this, _publicKey, publicKey);
    __privateSet(this, _address, address);
    this.label = ansName;
  }
  get address() {
    return __privateGet(this, _address).toString();
  }
  get publicKey() {
    return __privateGet(this, _publicKey).toUint8Array();
  }
  get signingScheme() {
    if (__privateGet(this, _publicKey) instanceof import_ts_sdk.Ed25519PublicKey) {
      return import_ts_sdk.SigningScheme.Ed25519;
    }
    if (__privateGet(this, _publicKey) instanceof import_ts_sdk.MultiEd25519PublicKey) {
      return import_ts_sdk.SigningScheme.MultiEd25519;
    }
    if (__privateGet(this, _publicKey) instanceof import_ts_sdk.AnyPublicKey) {
      return import_ts_sdk.SigningScheme.SingleKey;
    }
    if (__privateGet(this, _publicKey) instanceof import_ts_sdk.MultiKey) {
      return import_ts_sdk.SigningScheme.MultiKey;
    }
    throw new Error("Unsupported public key type");
  }
  // endregion
};
_address = new WeakMap();
_publicKey = new WeakMap();

// src/helpers.ts
var import_ts_sdk2 = require("@aptos-labs/ts-sdk");
var import_wallet_standard2 = require("@aptos-labs/wallet-standard");
function customAccountToStandardAccount({
  address,
  name,
  publicKey
}) {
  return new import_wallet_standard2.AccountInfo({
    address,
    ansName: name,
    publicKey
  });
}
function unwrapUserResponse(response, callback) {
  if (response.status === "dismissed") {
    return { status: import_wallet_standard2.UserResponseStatus.REJECTED };
  }
  return { args: callback(response.args), status: import_wallet_standard2.UserResponseStatus.APPROVED };
}
function networkToChainId(network) {
  switch (network) {
    case import_ts_sdk2.Network.MAINNET:
      return import_ts_sdk2.NetworkToChainId.mainnet;
    case import_ts_sdk2.Network.TESTNET:
      return import_ts_sdk2.NetworkToChainId.testnet;
    default:
      return void 0;
  }
}

// src/AptosConnectWallet.ts
var _AptosConnectWallet = class _AptosConnectWallet {
  constructor({
    aptosClientConfig,
    claimSecretKey,
    network = import_ts_sdk3.Network.MAINNET,
    preferredWalletName,
    ...clientConfig
  }) {
    // endregion
    // region AptosWallet
    this.version = "1.0.0";
    this.chains = import_wallet_standard3.APTOS_CHAINS;
    this.client = new import_dapp_sdk.ACDappClient(clientConfig);
    if (!import_ts_sdk3.NetworkToNodeAPI[network] && network !== import_wallet_api.shelbynet.name) {
      throw new Error("Network not supported");
    }
    this.network = network;
    const aptosSettings = network !== import_wallet_api.shelbynet.name ? { network } : {
      fullnode: import_wallet_api.shelbynet.nodeUrl,
      indexer: import_wallet_api.shelbynet.indexerUrl,
      network: import_ts_sdk3.Network.CUSTOM
    };
    const aptosConfig = new import_ts_sdk3.AptosConfig({
      ...aptosSettings,
      ...aptosClientConfig
    });
    this.aptosClient = new import_ts_sdk3.Aptos(aptosConfig);
    this.preferredWalletName = preferredWalletName;
    if (claimSecretKey) {
      if (network === import_wallet_api.shelbynet.name) {
        throw new Error("Shelbynet not supported");
      }
      this.claimOptions = {
        network,
        secretKey: new import_ts_sdk3.Ed25519PrivateKey(claimSecretKey)
      };
    }
    this.chainIdPromise = this.aptosClient.getChainId();
    this.chainIdPromise.then((chainId) => {
      this.chainId = chainId;
    });
  }
  static get connectedAccount() {
    const serialized = localStorage.getItem(
      _AptosConnectWallet.connectedAccountStorageKey
    );
    if (!serialized) {
      return void 0;
    }
    try {
      const { address, publicKey } = JSON.parse(
        serialized
      );
      return new import_wallet_standard3.AccountInfo({
        address: import_ts_sdk3.AccountAddress.from(address),
        publicKey: (0, import_crypto.deserializePublicKeyB64)(publicKey)
      });
    } catch (_err) {
      this.connectedAccount = void 0;
      return void 0;
    }
  }
  static set connectedAccount(value) {
    if (value !== void 0) {
      const serialized = {
        address: value.address.toString(),
        publicKey: (0, import_crypto.serializePublicKeyB64)(value.publicKey)
      };
      localStorage.setItem(
        _AptosConnectWallet.connectedAccountStorageKey,
        JSON.stringify(serialized)
      );
    } else {
      localStorage.removeItem(_AptosConnectWallet.connectedAccountStorageKey);
    }
  }
  // eslint-disable-next-line class-methods-use-this
  get accounts() {
    const { connectedAccount } = _AptosConnectWallet;
    return connectedAccount ? [new AptosConnectAccount(connectedAccount)] : [];
  }
  async connect() {
    const { connectedAccount } = _AptosConnectWallet;
    if (connectedAccount !== void 0) {
      return { args: connectedAccount, status: import_wallet_standard3.UserResponseStatus.APPROVED };
    }
    const response = await this.client.connect({
      claimOptions: this.claimOptions,
      preferredWalletName: this.preferredWalletName
    });
    if (response.status === "dismissed") {
      return { status: import_wallet_standard3.UserResponseStatus.REJECTED };
    }
    const newConnectedAccount = customAccountToStandardAccount(
      response.args.account
    );
    _AptosConnectWallet.connectedAccount = newConnectedAccount;
    return {
      args: newConnectedAccount,
      status: import_wallet_standard3.UserResponseStatus.APPROVED
    };
  }
  async disconnect() {
    const { connectedAccount } = _AptosConnectWallet;
    if (connectedAccount) {
      await this.client.disconnect(connectedAccount.address);
      _AptosConnectWallet.connectedAccount = void 0;
    }
  }
  async signIn(input) {
    const response = await this.client.signIn({
      network: this.network,
      ...input
    });
    if (response.status === "dismissed") {
      return { status: import_wallet_standard3.UserResponseStatus.REJECTED };
    }
    const output = response.args;
    _AptosConnectWallet.connectedAccount = output.account;
    return { args: output, status: import_wallet_standard3.UserResponseStatus.APPROVED };
  }
  // eslint-disable-next-line class-methods-use-this
  async getAccount() {
    const { connectedAccount } = _AptosConnectWallet;
    if (!connectedAccount) {
      throw new import_wallet_standard3.AptosWalletError(import_wallet_standard3.AptosWalletErrorCode.Unauthorized);
    }
    return customAccountToStandardAccount(connectedAccount);
  }
  async getNetwork() {
    const chainId = await this.chainIdPromise;
    const isShelbynet = this.network === import_wallet_api.shelbynet.name;
    return {
      chainId,
      name: isShelbynet ? import_ts_sdk3.Network.CUSTOM : this.network,
      url: isShelbynet ? import_wallet_api.shelbynet.nodeUrl : import_ts_sdk3.NetworkToNodeAPI[this.network]
    };
  }
  async signMessage(input) {
    const { connectedAccount } = _AptosConnectWallet;
    if (!connectedAccount) {
      throw new import_wallet_standard3.AptosWalletError(import_wallet_standard3.AptosWalletErrorCode.Unauthorized);
    }
    const chainId = networkToChainId(this.network) ?? this.chainId ?? await this.chainIdPromise;
    const { message, nonce } = input;
    const encoder = new TextEncoder();
    const messageBytes = encoder.encode(message);
    const nonceBytes = encoder.encode(nonce);
    const response = await this.client.signMessage({
      chainId,
      message: messageBytes,
      nonce: nonceBytes,
      signerAddress: connectedAccount.address
    });
    if (response.status === "dismissed") {
      return { status: import_wallet_standard3.UserResponseStatus.REJECTED };
    }
    const { fullMessage, signature } = response.args;
    const extraResponseArgs = {
      address: connectedAccount.address.toString(),
      application: this.client.dappInfo.domain,
      chainId,
      message,
      nonce,
      prefix: "APTOS"
    };
    return {
      args: {
        fullMessage,
        signature,
        ...extraResponseArgs
      },
      status: import_wallet_standard3.UserResponseStatus.APPROVED
    };
  }
  async signTransaction(txnOrArgs, _asFeePayer) {
    const { connectedAccount } = _AptosConnectWallet;
    if (!connectedAccount) {
      throw new import_wallet_standard3.AptosWalletError(import_wallet_standard3.AptosWalletErrorCode.Unauthorized);
    }
    if ("bcsToBytes" in txnOrArgs) {
      const transaction = txnOrArgs;
      const feePayer = transaction.feePayerAddress ? { address: transaction.feePayerAddress } : void 0;
      const secondarySigners = transaction.secondarySignerAddresses?.map(
        (address) => ({ address })
      );
      const response2 = await this.client.signTransaction({
        feePayer,
        network: this.network,
        secondarySigners,
        signerAddress: connectedAccount.address,
        transaction: transaction.rawTransaction
      });
      return unwrapUserResponse(response2, (args) => args.authenticator);
    }
    const requestArgs = txnOrArgs;
    const response = await this.client.signTransaction({
      network: this.network,
      ...requestArgs,
      signerAddress: connectedAccount.address
    });
    return unwrapUserResponse(response, (responseArgs) => {
      const { authenticator, rawTransaction } = responseArgs;
      if (!rawTransaction) {
        throw new Error("Expected raw transaction in response args");
      }
      const secondarySigners = requestArgs.secondarySigners ?? [];
      let transaction;
      if (secondarySigners.length > 0) {
        transaction = new import_ts_sdk3.MultiAgentTransaction(
          rawTransaction,
          secondarySigners.map((s) => s.address),
          requestArgs.feePayer?.address
        );
      } else {
        transaction = new import_ts_sdk3.SimpleTransaction(
          rawTransaction,
          requestArgs.feePayer?.address
        );
      }
      return {
        authenticator,
        rawTransaction: transaction
      };
    });
  }
  async signAndSubmitTransaction(args) {
    const { gasUnitPrice, maxGasAmount, payload } = args;
    const { connectedAccount } = _AptosConnectWallet;
    if (!connectedAccount) {
      throw new import_wallet_standard3.AptosWalletError(import_wallet_standard3.AptosWalletErrorCode.Unauthorized);
    }
    const response = await this.client.signAndSubmitTransaction({
      gasUnitPrice,
      maxGasAmount,
      network: this.network,
      payload,
      signerAddress: connectedAccount.address
    });
    if (response.status === "dismissed") {
      return { status: import_wallet_standard3.UserResponseStatus.REJECTED };
    }
    return {
      args: { hash: response.args.txnHash },
      status: import_wallet_standard3.UserResponseStatus.APPROVED
    };
  }
  // eslint-disable-next-line class-methods-use-this
  async onAccountChange(_callback) {
  }
  // eslint-disable-next-line class-methods-use-this
  async onNetworkChange(_callback) {
  }
  // endregion
};
// region connectedAccount
_AptosConnectWallet.connectedAccountStorageKey = "@aptos-connect/connectedAccount";
var AptosConnectWallet = _AptosConnectWallet;

// src/config.ts
var walletMetadata = {
  apple: {
    icon: (
      // eslint-disable-next-line max-len
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxzdHlsZT4KICAgICAgICBwYXRoIHsKICAgICAgICAgICAgZmlsbDogYmxhY2s7CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7CiAgICAgICAgICAgIHBhdGggewogICAgICAgICAgICAgICAgZmlsbDogd2hpdGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA8L3N0eWxlPgogICAgPHBhdGgKICAgICAgICBkPSJNMjAuMzkzMiA4LjE4MjQyQzIwLjI1NzggOC4yOTA0MyAxNy44NjggOS42NzUzNyAxNy44NjggMTIuNzU0OUMxNy44NjggMTYuMzE2OCAyMC45MDkgMTcuNTc3IDIxIDE3LjYwODJDMjAuOTg2IDE3LjY4NSAyMC41MTY5IDE5LjMzMzkgMTkuMzk2NiAyMS4wMTQxQzE4LjM5NzcgMjIuNDkyNiAxNy4zNTQ1IDIzLjk2ODggMTUuNzY3NSAyMy45Njg4QzE0LjE4MDQgMjMuOTY4OCAxMy43NzIgMjMuMDIwNyAxMS45Mzk5IDIzLjAyMDdDMTAuMTU0NSAyMy4wMjA3IDkuNTE5NzIgMjQgOC4wNjgwNSAyNEM2LjYxNjM5IDI0IDUuNjAzNDkgMjIuNjMxOSA0LjQzODg5IDIwLjk1MTdDMy4wODk5MiAxOC45Nzg3IDIgMTUuOTEzNiAyIDEzLjAwNDVDMiA4LjMzODQzIDQuOTUwMDEgNS44NjM3OSA3Ljg1MzM0IDUuODYzNzlDOS4zOTYwMiA1Ljg2Mzc5IDEwLjY4MiA2LjkwNTQ5IDExLjY1MDUgNi45MDU0OUMxMi41NzI0IDYuOTA1NDkgMTQuMDEwMSA1LjgwMTM4IDE1Ljc2NTEgNS44MDEzOEMxNi40MzAzIDUuODAxMzggMTguODIwMiA1Ljg2Mzc5IDIwLjM5MzIgOC4xODI0MlpNMTQuOTMxOSAzLjgyNTk4QzE1LjY1NzggMi45NDAyOSAxNi4xNzEyIDEuNzExMzcgMTYuMTcxMiAwLjQ4MjQ0OEMxNi4xNzEyIDAuMzEyMDMxIDE2LjE1NzIgMC4xMzkyMTQgMTYuMTI2OSAwQzE0Ljk0NiAwLjA0NTYwNDYgMTMuNTQxIDAuODA4ODgxIDEyLjY5MzggMS44MTkzOEMxMi4wMjg2IDIuNTk3MDYgMTEuNDA3OCAzLjgyNTk4IDExLjQwNzggNS4wNzE3MUMxMS40MDc4IDUuMjU4OTMgMTEuNDM4MiA1LjQ0NjE0IDExLjQ1MjIgNS41MDYxNUMxMS41MjY4IDUuNTIwNTUgMTEuNjQ4MiA1LjUzNzM1IDExLjc2OTYgNS41MzczNUMxMi44MjkxIDUuNTM3MzUgMTQuMTYxOCA0LjgwNzY4IDE0LjkzMTkgMy44MjU5OFoiIC8+Cjwvc3ZnPg=="
    ),
    name: "Continue with Apple",
    url: "https://web.petra.app"
  },
  generic: {
    icon: (
      // eslint-disable-next-line max-len
      "data:image/png;base64,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"
    ),
    name: "Petra Web",
    url: "https://web.petra.app"
  },
  google: {
    icon: (
      // eslint-disable-next-line max-len
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaF8yMCB3XzIwIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjU0IDEyLjc2MTNDMjMuNTQgMTEuOTQ1OSAyMy40NjY4IDExLjE2MTggMjMuMzMwOSAxMC40MDkxSDEyLjVWMTQuODU3NUgxOC42ODkxQzE4LjQyMjUgMTYuMjk1IDE3LjYxMjMgMTcuNTEyOSAxNi4zOTQzIDE4LjMyODRWMjEuMjEzOEgyMC4xMTA5QzIyLjI4NTUgMTkuMjExOCAyMy41NCAxNi4yNjM2IDIzLjU0IDEyLjc2MTNaIiBmaWxsPSIjNDI4NUY0Ij48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi40OTk1IDIzLjk5OThDMTUuNjA0NSAyMy45OTk4IDE4LjIwNzcgMjIuOTcgMjAuMTEwNCAyMS4yMTM3TDE2LjM5MzggMTguMzI4MkMxNS4zNjQgMTkuMDE4MiAxNC4wNDY3IDE5LjQyNTkgMTIuNDk5NSAxOS40MjU5QzkuNTA0MjUgMTkuNDI1OSA2Ljk2OTAyIDE3LjQwMyA2LjA2NDcgMTQuNjg0OEgyLjIyMjY2VjE3LjY2NDRDNC4xMTQ5MyAyMS40MjI4IDguMDA0MDIgMjMuOTk5OCAxMi40OTk1IDIzLjk5OThaIiBmaWxsPSIjMzRBODUzIj48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA2NTIzIDE0LjY4NTFDNS44MzUyMyAxMy45OTUxIDUuNzA0NTUgMTMuMjU4MSA1LjcwNDU1IDEyLjUwMDFDNS43MDQ1NSAxMS43NDIyIDUuODM1MjMgMTEuMDA1MSA2LjA2NTIzIDEwLjMxNTFWNy4zMzU1N0gyLjIyMzE4QzEuNDQ0MzIgOC44ODgwNyAxIDEwLjY0NDQgMSAxMi41MDAxQzEgMTQuMzU1OCAxLjQ0NDMyIDE2LjExMjIgMi4yMjMxOCAxNy42NjQ3TDYuMDY1MjMgMTQuNjg1MVoiIGZpbGw9IiNGQkJDMDUiPjwvcGF0aD48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjQ5OTUgNS41NzM4NkMxNC4xODc5IDUuNTczODYgMTUuNzAzOCA2LjE1NDA5IDE2Ljg5NTYgNy4yOTM2NEwyMC4xOTQgMy45OTUyM0MxOC4yMDI0IDIuMTM5NTUgMTUuNTk5MiAxIDEyLjQ5OTUgMUM4LjAwNDAyIDEgNC4xMTQ5MyAzLjU3NzA1IDIuMjIyNjYgNy4zMzU0NUw2LjA2NDcgMTAuMzE1QzYuOTY5MDIgNy41OTY4MiA5LjUwNDI1IDUuNTczODYgMTIuNDk5NSA1LjU3Mzg2WiIgZmlsbD0iI0VBNDMzNSI+PC9wYXRoPjwvc3ZnPg=="
    ),
    name: "Continue with Google",
    url: "https://web.petra.app"
  }
};

// src/AptosConnectAppleWallet.ts
var AptosConnectAppleWallet = class extends AptosConnectWallet {
  constructor(config) {
    super({ ...config, provider: "apple" });
    this.name = walletMetadata.apple.name;
    this.icon = walletMetadata.apple.icon;
    this.url = walletMetadata.apple.url;
  }
  // region AptosWallet
  get features() {
    return {
      [import_wallet_standard4.AptosConnectNamespace]: {
        connect: this.connect.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosDisconnectNamespace]: {
        disconnect: this.disconnect.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosGetAccountNamespace]: {
        account: this.getAccount.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosGetNetworkNamespace]: {
        network: this.getNetwork.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosOnAccountChangeNamespace]: {
        onAccountChange: this.onAccountChange.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosOnNetworkChangeNamespace]: {
        onNetworkChange: this.onNetworkChange.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosSignAndSubmitTransactionNamespace]: {
        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),
        version: "1.1.0"
      },
      [import_wallet_standard4.AptosSignInNamespace]: {
        signIn: this.signIn.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosSignMessageNamespace]: {
        signMessage: this.signMessage.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard4.AptosSignTransactionNamespace]: {
        signTransaction: this.signTransaction.bind(this),
        version: "1.1.0"
      }
    };
  }
  // endregion
};

// src/AptosConnectGenericWallet.ts
var import_wallet_standard5 = require("@aptos-labs/wallet-standard");
var AptosConnectGenericWallet = class extends AptosConnectWallet {
  constructor(config) {
    super({ ...config, provider: "generic" });
    this.name = walletMetadata.generic.name;
    this.icon = walletMetadata.generic.icon;
    this.url = walletMetadata.generic.url;
  }
  // region AptosWallet
  get features() {
    return {
      [import_wallet_standard5.AptosConnectNamespace]: {
        connect: this.connect.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosDisconnectNamespace]: {
        disconnect: this.disconnect.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosGetAccountNamespace]: {
        account: this.getAccount.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosGetNetworkNamespace]: {
        network: this.getNetwork.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosOnAccountChangeNamespace]: {
        onAccountChange: this.onAccountChange.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosOnNetworkChangeNamespace]: {
        onNetworkChange: this.onNetworkChange.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosSignAndSubmitTransactionNamespace]: {
        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),
        version: "1.1.0"
      },
      [import_wallet_standard5.AptosSignInNamespace]: {
        signIn: this.signIn.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosSignMessageNamespace]: {
        signMessage: this.signMessage.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard5.AptosSignTransactionNamespace]: {
        signTransaction: this.signTransaction.bind(this),
        version: "1.1.0"
      }
    };
  }
  // endregion
};

// src/AptosConnectGoogleWallet.ts
var import_wallet_standard6 = require("@aptos-labs/wallet-standard");
var AptosConnectGoogleWallet = class extends AptosConnectWallet {
  constructor(config) {
    super({ ...config, provider: "google" });
    this.name = walletMetadata.google.name;
    this.icon = walletMetadata.google.icon;
    this.url = walletMetadata.google.url;
  }
  // region AptosWallet
  get features() {
    return {
      [import_wallet_standard6.AptosConnectNamespace]: {
        connect: this.connect.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosDisconnectNamespace]: {
        disconnect: this.disconnect.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosGetAccountNamespace]: {
        account: this.getAccount.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosGetNetworkNamespace]: {
        network: this.getNetwork.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosOnAccountChangeNamespace]: {
        onAccountChange: this.onAccountChange.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosOnNetworkChangeNamespace]: {
        onNetworkChange: this.onNetworkChange.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosSignAndSubmitTransactionNamespace]: {
        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),
        version: "1.1.0"
      },
      [import_wallet_standard6.AptosSignInNamespace]: {
        signIn: this.signIn.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosSignMessageNamespace]: {
        signMessage: this.signMessage.bind(this),
        version: "1.0.0"
      },
      [import_wallet_standard6.AptosSignTransactionNamespace]: {
        signTransaction: this.signTransaction.bind(this),
        version: "1.1.0"
      }
    };
  }
  // endregion
};

// src/index.ts
function registerAptosConnect(config) {
  const googleWalletPlugin = new AptosConnectGoogleWallet(config);
  const appleWalletPlugin = new AptosConnectAppleWallet(config);
  const genericWalletPlugin = new AptosConnectGenericWallet(config);
  (0, import_wallet_standard7.registerWallet)(googleWalletPlugin);
  (0, import_wallet_standard7.registerWallet)(appleWalletPlugin);
  (0, import_wallet_standard7.registerWallet)(genericWalletPlugin);
}
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  AptosConnectAccount,
  AptosConnectAppleWallet,
  AptosConnectGenericWallet,
  AptosConnectGoogleWallet,
  AptosConnectWallet,
  registerAptosConnect
});
//# sourceMappingURL=index.js.map