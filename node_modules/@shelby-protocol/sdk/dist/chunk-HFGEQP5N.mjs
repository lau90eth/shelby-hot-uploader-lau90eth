import {
  getSdk
} from "./chunk-WJKSPJSS.mjs";
import {
  getAptosConfig
} from "./chunk-RBFWGDMY.mjs";
import {
  NetworkToShelbyBlobIndexerBaseUrl
} from "./chunk-SEXQTDX6.mjs";

// src/core/operations/index.ts
import { Network } from "@aptos-labs/ts-sdk";
import { GraphQLClient } from "graphql-request";
function createShelbyIndexerClient(baseUrl, options) {
  const graphqlClient = new GraphQLClient(baseUrl, options);
  return getSdk(graphqlClient);
}
function getShelbyIndexerClient(config) {
  const aptosConfig = config.aptos ?? getAptosConfig(config);
  let { apiKey: indexerApiKey, baseUrl } = config.indexer ?? {};
  if (!baseUrl) {
    switch (aptosConfig?.network) {
      // TODO: Add endpoints for core networks
      case Network.MAINNET:
      case Network.TESTNET:
      case Network.DEVNET:
      case Network.SHELBYNET:
        baseUrl = NetworkToShelbyBlobIndexerBaseUrl[aptosConfig.network];
        break;
    }
  }
  if (baseUrl === void 0) {
    throw new Error(
      "The ShelbyClientConfig does not support the Shelby indexer. Please configure the endpoint in the ShelbyClientConfig.indexer.endpoint or provide a supported Aptos network."
    );
  }
  const apiKey = indexerApiKey ?? config.apiKey;
  return createShelbyIndexerClient(baseUrl, {
    headers: {
      ...apiKey ? { Authorization: `Bearer ${apiKey}` } : {},
      "x-aptos-client": "shelby-ts-sdk"
    }
  });
}

export {
  createShelbyIndexerClient,
  getShelbyIndexerClient
};
