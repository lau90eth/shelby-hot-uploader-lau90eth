import "../../chunk-7P6ASYW6.mjs";

// src/core/erasure/utils.ts
function allocateAndCopy(data, desiredLength) {
  if (data.byteLength === desiredLength) {
    return data.slice();
  }
  if (data.byteLength > desiredLength) {
    return data.subarray(0, desiredLength);
  }
  const buffer = new Uint8Array(desiredLength);
  buffer.set(data);
  return buffer;
}
function pad(provider, data) {
  const { erasure_k, chunkSizeBytes } = provider.config;
  const capacity = erasure_k * chunkSizeBytes;
  if (data.byteLength > capacity) {
    throw new Error(
      `Data size ${data.byteLength} bytes exceeds systematic capacity ${capacity} bytes.`
    );
  }
  if (data.byteLength === capacity) {
    return data;
  }
  const padded = new Uint8Array(capacity);
  padded.set(data);
  return padded;
}
export {
  allocateAndCopy,
  pad
};
